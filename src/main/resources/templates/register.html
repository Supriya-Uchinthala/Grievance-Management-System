<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - City Grievance Management System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body class="bg-light">
<div class="container">
    <div class="row justify-content-center mt-4">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white text-center">
                    <h3>City Grievance Management System</h3>
                </div>
                <div class="card-body">
                    <h4 class="text-center mb-4">Create an Account</h4>

                    <div th:if="${param.success}" class="alert alert-success">
                        Registration successful! Please check your email for verification.
                    </div>

                    <div th:if="${param.error}" class="alert alert-danger" th:text="${param.error}">
                        Error message
                    </div>

                    <form th:action="@{/register}" method="post" th:object="${user}">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="firstName" class="form-label">First Name</label>
                                <input type="text" class="form-control" id="firstName" th:field="*{firstName}" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
                            </div>

                            <div class="col-md-6">
                                <label for="lastName" class="form-label">Last Name</label>
                                <input type="text" class="form-control" id="lastName" th:field="*{lastName}" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" th:field="*{email}" required>
                            <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" th:field="*{phone}" required>
                            <div class="text-danger" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                        </div>

                        <div class="mb-3">
                            <label for="address" class="form-label">Address</label>
                            <textarea class="form-control" id="address" th:field="*{address}" rows="2" required></textarea>
                            <div class="text-danger" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" class="form-control" id="password" th:field="*{password}" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                                <small class="form-text text-muted">
                                    Password must be at least 8 characters and include uppercase, lowercase, number, and special character.
                                </small>
                            </div>

                            <div class="col-md-6">
                                <label for="confirmPassword" class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                                <div class="text-danger" th:if="${#fields.hasErrors('global')}" th:errors="*{global}"></div>
                            </div>
                        </div>

                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="terms" name="terms" required>
                            <label class="form-check-label" for="terms">
                                I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a>
                            </label>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">Register</button>
                        </div>
                    </form>

                    <hr>

                    <div class="text-center">
                        <p>Already have an account? <a th:href="@{/login}" class="text-decoration-none">Login</a></p>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4 mb-4">
                <a th:href="@{/}" class="btn btn-outline-secondary">Back to Home</a>
            </div>
        </div>
    </div>
</div>

<!-- Terms and Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h5>1. User Registration and Account</h5>
                <p>By registering on the City Grievance Management System, you agree to provide accurate and complete information. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.</p>

                <h5>2. Privacy Policy</h5>
                <p>Your personal information will be handled in accordance with our Privacy Policy. By registering, you consent to the collection and use of your information as described in the Privacy Policy.</p>

                <h5>3. User Conduct</h5>
                <p>You agree to use the system responsibly and not to submit false or malicious complaints. Misuse of the system may result in account suspension.</p>

                <h5>4. Complaint Submission</h5>
                <p>All complaints submitted should be genuine and provide accurate information. You may be contacted for verification or additional details regarding your complaint.</p>

                <h5>5. Limitation of Liability</h5>
                <p>The City Grievance Management System provides a platform for reporting and tracking grievances but does not guarantee resolution of all issues. The city administration will make reasonable efforts to address valid complaints.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/scripts.js}"></script>
<script th:src="@{/js/register-validation.js}"></script>
</body>
</html>